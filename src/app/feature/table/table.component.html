<div style="border: 1px solid black">
    {{ dataSource.tableHeader.displayColumns }}
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        <!-- Header row first group Search-->
        <ng-container matColumnDef="header-row-first-group">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" [attr.rowSpan]="2">Search</th>
        </ng-container>

        <!-- Category headers -->
        <ng-container *ngFor="let column of dataSource.tableHeader.categoriesColumns" matColumnDef="{{ column.categoryIdentifier }}">          
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="column.colspan" (click)="dataSource.toggleCategory(column.id, 'header')" >
                {{ column.category }}
            </th>
        </ng-container>

        <!-- Sticky Column -->
        <ng-container *ngFor="let column of dataSource.tableHeader.stickyColumns">
          <ng-container [matColumnDef]="column">
              <th mat-header-cell *matHeaderCellDef style="display: none;">{{ column }}</th>
              <td mat-cell *matCellDef="let row">
                <span *ngIf="column === 'input_category'" (click)="dataSource.toggleCategory(row['id'], 'column')">{{ row[column] }}</span>
                <span *ngIf="column !== 'input_category'">{{ row[column] }}</span>
              </td>
          </ng-container>
        </ng-container>

        <ng-container *ngFor="let column of dataSource.tableHeader.dynamicColumns">
            <ng-container [matColumnDef]="column">
                <th mat-header-cell *matHeaderCellDef>{{ column }}</th>
                <td mat-cell *matCellDef="let row">
                  {{ row[column] }}                
                </td>
            </ng-container>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="dataSource.tableHeader.displayCategoriesColumns"></tr>
        <tr mat-header-row *matHeaderRowDef="dataSource.tableHeader.displayColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: dataSource.tableHeader.displayColumns"></tr>
    </table>
</div>
